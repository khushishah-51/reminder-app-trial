<!--
<link rel="stylesheet" href="/style2.css">
<div class="login-box">
    <h2>Edit Task</h2>
    <form method="PUT" action="/tasks/{{_id}}">
      <div class="user-box">
        <input type="text" name="title" required="">
        <label>Title</label>
      </div>
      <div class="user-box">
        <input type="text" name="description" required="">
        <label>Description</label>
       </div>
        <div class="user-box">
        <input type="text" name="date" required="">
        <label>Date</label>
      </div>
      <input type="submit" value="Submit">
    </form>
  </div>
  -->
 
 <link rel="stylesheet" href="/style2.css">
<div class="login-box">
    <h2>Edit Task</h2>
    
    <form id="editTaskForm" method="POST"  action="/tasks/{{_id}}  " >
    
      <div class="user-box">
        <input type="text" name="title" required="">
        <label>Title</label>
      </div>
      <div class="user-box">
        <input type="text" name="description" required="">
        <label>Description</label>
       </div>
        <div class="user-box">
        <input type="text" name="date" required="">
        <label>Date</label>
      </div>
      <input type="submit" value="Submit">
    </form>
    
</div>


{{#each tasks}}
<script>

document.getElementById("editTaskForm").addEventListener("submit", async function(event) {
    event.preventDefault(); 
    
    var formData = new FormData(this); 
    var taskId = "{{_id}}";

    try {
        const response = await fetch('/tasks/' + taskId, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json' 
            },
            body: JSON.stringify(Object.fromEntries(formData)) 
        });

        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        window.location.href = '/tasks'; // Redirect to tasks page
    } catch (error) {
        console.error('Error:', error);
        alert('Error updating task. Please try again.');
    }
});
</script>
{{/each}}

 







